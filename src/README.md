# YSearch信息检索系统
## 索引构建

`./data`文件夹下为数据处理、索引构建文件。步骤如下：

+ 下载人民日报和搜狗数据，其中搜狗数据需要二次处理，运行`sogou.py`将原本的分词空格去除，替换< N >为0。

+ 下载thulac c++版本，运行`./thulac -t2s -input [inputfile.txt] -output [outputfile.txt]`，对数据进行分词和词性标注。生成的文件格式为每行一句，每句以空格分词，每个词后接‘_'和相对应的词性。

+ 运行elastic search

+ 运行`add2es.py`。该文件对分词结果进行处理，连接elastic search，并批量加入数据，由es生成索引。index名称为”sentences“，每条数据对应一句话，由三个字段组成，分别对应词汇、词性、词汇加词性。例如其中一条数据如下：

  ```
  {
    "content": "石头 与 石头 相击",
    "part": "n c n v",
    "mix": "石头_n 与_c 石头_n 相击_v"
  }
  ```

## Demo实现

`./flask`文件夹下为基于flask的demo项目。运行`python ysearch.py`，在浏览器中打开`http://localhost:5000/`即可。

## 搜索说明

支持的搜索格式：

+ `词汇1(词性1) 词汇2(词性2) ... 词汇n(词性n) [+a]`

+ `+a`为可选项，表示n个词必须按顺序相邻。

+ 如果没有相邻限制，那么n个词必须输入词汇，可以不限制词性；

+ 如果有相邻限制，那么不输入词汇，仅限制词性也是被允许的。

搜索举例：

+ `我 笑`
+ `我 笑(v)`
+ `我(r) (v) +a`
+ `(r) (v) +a`

